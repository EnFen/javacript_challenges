<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Callbacks & JSON</title>

</head>

<body>

  <p>Empty HTML doc :) Some JS is running. Save me to your machine.</p>

  <script>
    let getUser = new Promise(function (resolve, reject) {
      fetch('https://randomuser.me/api')
        .then(
          (res) => resolve(res.json()),
          () => reject('Unable to fetch!')
        )
    })

    getUser.then(function (res) {
      console.log('Success: ', res.results[0])
    }, function (err) {
      console.error(`Error: ${err}`)
    })

    // fetch('https://randomuser.me/api')
    //   .then(
    //     (res) => {
    //       console.log(res)
    //       return res.json()
    //     },
    //     () => console.error('Unable to fetch!')
    //   )
    //   .then((json) => console.log(json))

    // getRandomUser = (callback) => {
    //   // This function uses AJAX to hit the random user API.
    //   // More info: https://randomuser.me

    //   var xhr = new XMLHttpRequest();
    //   // xhr.addEventListener('error', transferFailed)

    //   xhr.open('GET', 'https://randomuser.me/api/', true);
    //   xhr.onload = function () {
    //     /* You'll start here */
    //     callback(null, xhr.response)
    //   };

    //   xhr.onerror = function () {
    //     callback('Failed!')
    //   }

    //   xhr.send();
    // }

    // function parseRandomUser(err, json) {
    //   if (err) {
    //     console.error(err)
    //     return
    //   } else {
    //     let randomUser = JSON.parse(json)
    //     let randomUserDetails = randomUser.results[0]
    //     console.log(randomUserDetails)
    //   }
    // }

    // // function transferFailed(event) {
    // //   console.log('An error occurred')
    // //   return
    // // }

    // getRandomUser(parseRandomUser); // Execute the function
  </script>
</body>

</html>